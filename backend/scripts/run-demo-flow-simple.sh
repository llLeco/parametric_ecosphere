#!/bin/bash

echo "🎭 Running Parametric Insurance Flow Demo..."
echo "=============================================="
echo ""

echo "✅ 1. Sistema gera seguros e suas regras"
sleep 1

echo "✅ 2. Contribuidores travam capital no pool"
sleep 1

echo "✅ 3. Resseguradores assinam tratado de participação"
sleep 1

echo "✅ 4. Agricultor contrata o seguro"
sleep 1

echo "✅ 5. Agricultor paga mensalmente 10k"
sleep 1

echo "✅ 6. Distribuição: 70% Pool, 25% Resseguradores, 5% Sistema"
sleep 1

echo "✅ 7. Agricultor sofre catástrofe climática"
sleep 1

echo "✅ 8. Oracle registra triggerEvent"
sleep 1

echo "✅ 9. Pool paga 80k (stop-loss)"
sleep 1

echo "✅ 10. Resseguradores pagam 20k restante"
sleep 1

echo ""
echo "🎉 Demo flow completed!"
echo ""
echo "📊 Parametric Insurance Flow Summary:"
echo "====================================="
echo "📋 Policy Created: ✅"
echo "💰 Pool Deposit: 500,000 tokens ✅"
echo "💳 Premium Paid: 10,000 tokens ✅"
echo "🌡️  Weather Event: Temperature > 35°C ✅"
echo "💸 Pool Payout: 80,000 tokens (stop-loss) ✅"
echo "🤝 Cession Request: 20,000 tokens excess ✅"
echo "💵 Cession Funding: 20,000 tokens from reinsurer ✅"
echo "🎯 Final Payout: 20,000 tokens from cession ✅"
echo ""
echo "💰 Total Payout: 100,000 tokens"
echo "   - Pool Contribution: 80,000 tokens (80%)"
echo "   - Reinsurer Contribution: 20,000 tokens (20%)"
echo ""
echo "💳 Premium Distribution (10,000 tokens):"
echo "   - Pool Reserve: 7,000 tokens (70%)"
echo "   - Reinsurer: 2,500 tokens (25%)"
echo "   - System Fee: 500 tokens (5%)"
echo ""
echo "🎯 Flow completed successfully!"
